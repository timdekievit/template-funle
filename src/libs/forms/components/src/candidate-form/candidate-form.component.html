<form [formGroup]="form">
  <div class="row">
    <div class="col-md-6">
      <mat-form-field appearance="outline" floatLabel="always" color="accent">
        <mat-label>{{ 'components.candidateForm.email.label' | translate }}</mat-label>

        <input matInput type="email" inputmode="email" autocomplete="off" [readonly]="!admin"
          [formControl]="form.controls.email"
          [placeholder]="'components.candidateForm.email.placeholder' | translate" />

        <mat-error *ngIf="form.dirty && form.controls.email.hasError('required')">
          {{ 'components.candidateForm.email.errors.required' | translate }}
        </mat-error>

        <mat-error *ngIf="form.dirty && form.controls.email.hasError('email')">
          {{ 'components.candidateForm.email.errors.email' | translate }}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="col-md-6">
      <mat-form-field appearance="outline" floatLabel="always" color="accent">
        <mat-label>{{ 'components.candidateForm.phoneNumber.label' | translate }}</mat-label>

        <input matInput type="text" inputmode="numeric" autocomplete="off" [formControl]="form.controls.phoneNumber"
          [placeholder]="'components.candidateForm.phoneNumber.placeholder' | translate" />
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-md-4">
      <mat-form-field appearance="outline" floatLabel="always" color="accent">
        <mat-label>{{ 'components.candidateForm.firstname.label' | translate }}</mat-label>

        <input matInput autocomplete="off" [formControl]="form.controls.firstName"
          [placeholder]="'components.candidateForm.firstname.placeholder' | translate" />
      </mat-form-field>
    </div>
    <div class="col-md-4">
      <mat-form-field appearance="outline" floatLabel="always" color="accent">
        <mat-label>{{ 'components.candidateForm.prefix.label' | translate }}</mat-label>

        <input matInput autocomplete="off" [formControl]="form.controls.prefix"
          [placeholder]="'components.candidateForm.prefix.placeholder' | translate" />
      </mat-form-field>
    </div>
    <div class="col-md-4">
      <mat-form-field appearance="outline" floatLabel="always" color="accent">
        <mat-label>{{ 'components.candidateForm.name.label' | translate }}</mat-label>

        <input matInput autocomplete="off" [formControl]="form.controls.name"
          [placeholder]="'components.candidateForm.name.placeholder' | translate" />
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <mat-form-field appearance="outline" floatLabel="always" color="accent">
        <mat-label>{{ 'components.candidateForm.role.label' | translate }}</mat-label>

        <input matInput autocomplete="off" [formControl]="form.controls.role"
          [placeholder]="'components.candidateForm.role.placeholder' | translate" />

        <mat-error *ngIf="form.dirty && form.controls.role.hasError('required')">
          {{ 'components.candidateForm.role.errors.required' | translate }}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="col-md-3">
      <mat-form-field appearance="outline" floatLabel="always" color="accent">
        <mat-label>{{ 'components.candidateForm.hours.label' | translate }}</mat-label>

        <input matInput type="number" inputmode="numeric" autocomplete="off" [formControl]="form.controls.hours"
          [placeholder]="'components.candidateForm.hours.placeholder' | translate" min="1" max="40" />

        <mat-error *ngIf="form.dirty && form.controls.hours.hasError('required')">
          {{ 'components.candidateForm.hours.errors.required' | translate }}
        </mat-error>
        <mat-error *ngIf="form.dirty && form.controls.hours.hasError('min')">
          {{ 'components.candidateForm.hours.errors.min' | translate }}
        </mat-error>
        <mat-error *ngIf="form.dirty && form.controls.hours.hasError('max')">
          {{ 'components.candidateForm.hours.errors.max' | translate }}
        </mat-error>
      </mat-form-field>
    </div>
    <div class="col-md-3">
      <mat-form-field appearance="outline" floatLabel="always" color="accent">
        <mat-label>{{ 'components.candidateForm.rate.label' | translate }}</mat-label>

        <input matInput type="number" inputmode="numeric" autocomplete="off" [formControl]="form.controls.rate"
          [placeholder]="'components.candidateForm.rate.placeholder' | translate" min="0" max="200" />

        <mat-error *ngIf="form.dirty && form.controls.rate.hasError('required')">
          {{ 'components.candidateForm.rate.errors.required' | translate }}
        </mat-error>
        <mat-error *ngIf="form.dirty && form.controls.rate.hasError('min')">
          {{ 'components.candidateForm.rate.errors.min' | translate }}
        </mat-error>
        <mat-error *ngIf="form.dirty && form.controls.rate.hasError('max')">
          {{ 'components.candidateForm.rate.errors.max' | translate }}
        </mat-error>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <mat-form-field class="specialties-input" appearance="fill">
        <mat-label>Skills</mat-label>
        <mat-chip-list #chipList aria-label="Skills selection">
          <mat-chip *ngFor="let specialty of specialties"
                    (removed)="removeSpecialty(specialty)">
            {{specialty.value}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>
          <input placeholder="Voeg skill toe"
                 [formControl]="form.controls.specialty"
                 [matChipInputFor]="chipList"
                 [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                 [matChipInputAddOnBlur]="true"
                 (matChipInputTokenEnd)="addSpecialty($event)">
        </mat-chip-list>
      </mat-form-field>
    </div>
  </div>
  <div class="row" *ngIf="admin">
    <div class="col-md-12">
      <mat-form-field class="tags-input" appearance="fill">
        <mat-label>Tags</mat-label>
        <mat-chip-list #tagList aria-label="Tags selection">
          <mat-chip *ngFor="let tag of  candidate?.tags"
                    (removed)="removeTag(tag)">
            {{tag.value}}
            <mat-icon matChipRemove>cancel</mat-icon>
          </mat-chip>
          <input placeholder="Voeg tag toe"
                 [formControl]="form.controls.tag"
                 [matChipInputFor]="tagList"
                 [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                 [matChipInputAddOnBlur]="true"
                 (matChipInputTokenEnd)="addTag($event)">
        </mat-chip-list>
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <mat-form-field appearance="outline" floatLabel="always" (click)="fileUpload.click()" color="accent">
        <mat-label>{{ 'components.candidateForm.cv.label' | translate }}</mat-label>

        <input readonly matInput autocomplete="off" [formControl]="form.controls.cv" [value]="value.fileName"
          [placeholder]="'components.candidateForm.cv.placeholder' | translate" />

        <mat-icon matSuffix>attach_file</mat-icon>

        <mat-error *ngIf="form.dirty && form.controls.cv.hasError('required')">
          {{ 'components.candidateForm.cv.errors.required' | translate }}
        </mat-error>

        <mat-error *ngIf="form.controls.cv.hasError('fileMaxSize')">
          {{ 'components.candidateForm.cv.errors.fileMaxSize' | translate }}
        </mat-error>

        <mat-error *ngIf="form.controls.cv.hasError('fileExtension')">
          {{ 'components.candidateForm.cv.errors.fileExtension' | translate }}
        </mat-error>

        <input type="file" name="fileUpload" accept=".pdf" id="fileUpload" (change)="onFileUpload($event.target.files)"
          (click)="$event.stopPropagation()" #fileUpload />
      </mat-form-field>
    </div>
  </div>
  <div class="row">
    <div class="col-md-6">
      <mat-checkbox [formControl]="form.controls.searching">{{
        'components.candidateForm.searching.label' | translate
        }}</mat-checkbox>
    </div>
  </div>

  <ng-container *ngIf="searching || admin">
    <div class="row">
      <div class="col-md-6">
        <mat-form-field appearance="outline" floatLabel="always" color="accent" (click)="picker1.open()">
          <mat-label>{{ 'components.candidateForm.availability.label' | translate }}</mat-label>
          <input matInput disabled [matDatepicker]="picker1" [formControl]="form.controls.availability"
            [placeholder]="'components.candidateForm.availability.placeholder' | translate" />
          <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
          <mat-datepicker #picker1 disabled="false"></mat-datepicker>

          <mat-error *ngIf="form.dirty && form.controls.availability.hasError('required')">
            {{ 'components.candidateForm.availability.errors.required' | translate }}
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <!-- <div class="row">
      <div class="col-md-6">
        <mat-form-field appearance="outline" floatLabel="always" color="accent" (click)="picker2.open()">
          <mat-label>{{ 'components.candidateForm.contactDate.label' | translate }}</mat-label>
          <input matInput disabled [matDatepicker]="picker2"
            [formControl]="form.controls.contactDate"
            [placeholder]="'components.candidateForm.contactDate.placeholder' | translate" />
          <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
          <mat-datepicker #picker2 disabled="false"></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="col-md-6">
        <mat-form-field appearance="outline" floatLabel="always" color="accent">
          <mat-label>{{ 'components.candidateForm.contactTimeSlot.label' | translate }}</mat-label>

          <mat-select [formControl]="form.controls.contactTimeSlot">
            <mat-option *ngFor="let timeSlot of timeSlots; let i = index" [value]="i.toString()">{{ timeSlot }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div> -->
  </ng-container>
  
  <mat-checkbox *ngIf="admin" [formControl]="form.controls.contacted">Contact opgenomen</mat-checkbox>
  <mat-checkbox *ngIf="admin" [formControl]="form.controls.hasAccount">Heeft een login</mat-checkbox>

  <mat-form-field *ngIf="admin" appearance="outline" floatLabel="always" color="accent">
    <mat-label>{{ 'components.candidateForm.description.label' | translate }}</mat-label>

    <textarea matInput rows="6" autocomplete="off" [formControl]="form.controls.description"
      [placeholder]="'components.candidateForm.description.placeholder' | translate"></textarea>
  </mat-form-field>

  <!-- <mat-checkbox *ngIf="!admin" [formControl]="form.controls.cvApproval">Ik geef toestemming dat mijn gegevens gebruikt
    mogen worden door het funle-team voor verwerking en
    werving. Bekijk <a href="https://www.funle.nl/privacy-statement" target="_blank">hier</a> hoe wij omgaan met jouw
    gegevens.</mat-checkbox> -->
</form>

<button mat-flat-button color="accent" (click)="onSubmit()" [disabled]="disabled">
  {{ 'components.candidateForm.buttons.submit' | translate }}
</button>
